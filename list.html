<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <link rel="stylesheet" type="text/css" href="css/reset.css">
  <link rel="stylesheet" type="text/css" href="css/index.css">
</head>
<body>
  <div class="header-outer">
    <div class="header">
      <ul class="header-l">
        <li>
          <a class="header-light" id="username">username</a>
        </li>
        <li>
          <a class="header-light" id="user-hello">您好</a>
        </li>
        <li>
          <a href="" class="header-light">欢迎光临乐购</a>
        </li>
        <li>
          <a href="login.html" id="user-login">登陆</a>
        </li>
        <li>
          <a href="register.html" id="user-register">注册</a>
        </li>
      </ul>
      <ul class="header-r">
        <li><a href="" id="exit">退出</a></li>
        <li><a href="">乐购首页</a></li>
        <li><a href="">我的乐购</a></li>
        <li><a href="">联系客服</a></li>
      </ul>
    </div>
  </div>




  <div class="search-outer" id="search-outer">
    <div class="search">
      <div class="logo">
        <a href="index.html">
          <img src="images/logo.jpg"/>
          <span class="logo-txt">乐购</span>
        </a>
      </div>
      <div class="search-input">
        <input type="" name="search-box">
      </div>
      <div class="mylegou" id="mylegou">
        <a class="shop-cart" href="cart.html">购物车</a>
        <a class="shop-order" href="order.html">我的订单</a>
        <img class="shop-qrcode" src="images/legou.png" width="80px" height="80px" />
      </div>
    </div>
  </div>
  <div class="side-bar" id="side-bar">
    <a href="javascript:;" class="to-up" id="to-up">
      <span class="to-up-intro" id="to-up-intro">回到顶部</span>
    </a>
  </div>


  <div class="nav-outer">
    <div class="nav" id="nav">
      <ul class="goods-list" id="goods-list">
        <li><a href="index.html">主页</a></li>
      </ul>
    </div>
  </div>

  <div style="height:100px;"></div>
  <div class="commodity-outer" id="commodity-outer">
    <ul class="commodity-list" id="commodity-list">
    </ul>
  </div>

  <div class="footer" id="footer"></div>
  <script type="text/javascript" src="js/animate-1.1.js"></script>
  <script type="text/javascript" src="js/myajax.js"></script>
  <script type="text/javascript" src="js/backtotop.js"></script>
  <script type="text/javascript" src="js/index.js"></script>
  <script type="text/javascript">
    var oFooter = document.querySelector('#footer')
    var oUl = document.querySelector('#commodity-list');
    //加载商品；
    var index = 1;

    //保存参数：
    var cat_id = parseInt(getQueryString('cat_id'));
    //渲染商品内容
    myajax.get('http://h6.duchengjiu.top/shop/api_goods.php',{cat_id:cat_id},function(error,responseText) {
      loading(error,responseText)
      console.log(11111);
    })




    function loading(error,responseText) {
      // oUl.innerHTML = '';
      var json = JSON.parse(responseText);
      var data = json.data;
      console.log(data)
      for(var i = 0; i < data.length; i++) {
        oUl.innerHTML += `<li>
          <a href="goods.html?goods_id=${data[i].goods_id}">
            <img src="${data[i].goods_thumb}"/>
            <p class="goods-name">${data[i].goods_name}</p>
            <p class="goods-desc">蛋糕杯特殊的双层碗设计保证在加热过后隔热。有了这款蛋糕杯，用微波炉</p>
            <p class="goods-price">&yen;${data[i].price}</p>
          </a>
        </li>`
      }
    }
    //向下滚动时再次商品加载
    function addcont(error,responseText) {
      var json = JSON.parse(responseText);
      var data = json.data;
      for(var i = 0; i < data.length; i++) {
        oUl.innerHTML += `<li>
          <a href="goods.html?goods_id=${data[i].goods_id}">
            <img src="${data[i].goods_thumb}"/>
            <p class="goods-name">${data[i].goods_name}</p>
            <p class="goods-desc">蛋糕杯特殊的双层碗设计保证在加热过后隔热。有了这款蛋糕杯，用微波炉</p>
            <p class="goods-price">&yen;${data[i].price}</p>
          </a>
        </li>`
      }
    }
  </script>
</body>
</html>